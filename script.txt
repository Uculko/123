-- Таблица типов продукции
CREATE TABLE PRODUCT_TYPE (
    PRODUCT_TYPE_ID INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    PRODUCT_TYPE_NAME VARCHAR(100) UNIQUE,
    PRODUCT_TYPE_COEFFICIENT DECIMAL(10,2)
);

-- Таблица типов материалов
CREATE TABLE MATERIAL_TYPE (
    MATERIAL_TYPE_ID INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    MATERIAL_TYPE_NAME VARCHAR(100) UNIQUE,
    PERCENTAGE_DEFECTIVE_MATERIAL DECIMAL(5,4)
);

-- Таблица продукции
CREATE TABLE PRODUCT (
    PRODUCT_ID INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    PRODUCT_ARTICLE VARCHAR(100),
    PRODUCT_NAME VARCHAR(150) UNIQUE,
    MINIMUM_COST_FOR_PARTNER DECIMAL(15,2),
    PRODUCT_TYPE_ID INT,
    MATERIAL_TYPE_ID INT,
    FOREIGN KEY (PRODUCT_TYPE_ID) REFERENCES PRODUCT_TYPE(PRODUCT_TYPE_ID),
    FOREIGN KEY (MATERIAL_TYPE_ID) REFERENCES MATERIAL_TYPE(MATERIAL_TYPE_ID)
);

-- Таблица цехов
CREATE TABLE WORKSHOP (
    WORKSHOP_ID INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    WORKSHOP_NAME VARCHAR(100) UNIQUE,
    WORKSHOP_TYPE VARCHAR(50),
    WORKERS_COUNT INT
);

-- Связующая таблица между продукцией и цехом
CREATE TABLE PRODUCT_WORKSHOP (
    PRODUCT_WORKSHOP_ID INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    PRODUCT_ID INT,
    WORKSHOP_ID INT,
    MANUFACTURING_TIME_HOURS DECIMAL(10,2),
    FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCT(PRODUCT_ID),
    FOREIGN KEY (WORKSHOP_ID) REFERENCES WORKSHOP(WORKSHOP_ID)
);
